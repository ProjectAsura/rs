//-----------------------------------------------------------------------------
// File : rsResource.h
// Desc : Resource.
// Copyright(c) Project Asura. All right reserved.
//-----------------------------------------------------------------------------
#pragma once


namespace rs {

///////////////////////////////////////////////////////////////////////////////
// TextureResourc class
///////////////////////////////////////////////////////////////////////////////
class TextureResource
{
    //=========================================================================
    // list of friend classes and methods.
    //=========================================================================
    /* NOTHING */

public:
    //=========================================================================
    // public variables.
    //=========================================================================
    /* NOTHING */

    //=========================================================================
    // public methods.
    //=========================================================================

    //-------------------------------------------------------------------------
    //! @brief      コンストラクタです.
    //-------------------------------------------------------------------------
    TextureResource();

    //-------------------------------------------------------------------------
    //! @brief      デストラクタです.
    //-------------------------------------------------------------------------
    ~TextureResource();

    //-------------------------------------------------------------------------
    //! @brief      初期化処理です.
    //-------------------------------------------------------------------------
    bool Init(a3d::IDevice* pDevice, const PassTextureDesc& desc, uint32_t usage);

    //-------------------------------------------------------------------------
    //! @brief      終了処理です.
    //-------------------------------------------------------------------------
    void Term();

    //-------------------------------------------------------------------------
    //! @brief      参照カウンタを増やします.
    //-------------------------------------------------------------------------
    void Increment();

    //-------------------------------------------------------------------------
    //! @brief      参照カウンタを減らします.
    //-------------------------------------------------------------------------
    void Decrement();

    //-------------------------------------------------------------------------
    //! @brief      参照カウントを取得します.
    //-------------------------------------------------------------------------
    uint32_t GetRefCount() const;

    //-------------------------------------------------------------------------
    //! @brief      リソースステートを取得します.
    //-------------------------------------------------------------------------
    a3d::RESOURCE_STATE GetState() const;

    //-------------------------------------------------------------------------
    //! @brief      リソースステートを設定します.
    //-------------------------------------------------------------------------
    void SetState(a3d::RESOURCE_STATE state);

    //-------------------------------------------------------------------------
    //! @brief      テクスチャを取得します.
    //-------------------------------------------------------------------------
    a3d::ITexture* GetTexture() const;

    //-------------------------------------------------------------------------
    //! @brief      テクスチャ設定を取得します.
    //-------------------------------------------------------------------------
    const PassTextureDesc& GetDesc() const;

    //-------------------------------------------------------------------------
    //! @brief      設定が同じかどうかチェックします.
    //-------------------------------------------------------------------------
    bool IsEqual(const PassTextureDesc& desc, uint32_t usage) const;

private:
    //=========================================================================
    // private variables.
    //=========================================================================
    uint32_t            m_RefCount  = 0;
    PassTextureDesc     m_Desc      = {};
    uint32_t            m_Usage     = 0;
    a3d::ITexture*      m_pTexture  = nullptr;
    a3d::RESOURCE_STATE m_State     = a3d::RESOURCE_STATE_UNKNOWN;

    //=========================================================================
    // private methods.
    //=========================================================================
    /* NOTHING */
};

} // namespace rs
